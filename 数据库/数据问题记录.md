# 数据库问题记录

## 一. mybatis与JPA选择

* 选择的标准:
  1. 数据库只做数据的保存,不做业务逻辑的约束判断(不设置外键)
  2. 数据操作只涉及到数据层面,不涉及到逻辑(1对多,多对多这种)
  3. 数据结果集转换要方便
  4. 先阶段
* mybaits相关问题
  1. 需要操作xml(不好调试,代码编写不友好)
  2. 分页组件的支持在mapper层面.而mapper的可重用性基本等于没有.
* jpa相关问题
  1. 需要理解对象4种状态
  2. 轻量级使用,不使用一对多,多对多等
  3. 复杂语句写原生sql

## 二. mysql字符集区别

* UTF8 不是标准的UTF8数据格式，中文情况下不推荐使用。
* utf8mb4_bin 将字符串每个字符用二进制存储数据，**区分大小写**。
* utf8mb4_general_ci **不区分大小写**(ci表示case insensitive)，**没实现Unicode排序规则**，对特殊字符，排序结果可能不一致。
* utf8mb4_unicode_ci 基于Unicode进行排序

## 三 Spring Transaction相关

1. 配置了通用事物后，如何定制单个方法的事物？例如：我想单独定制一个方法的事物为REquired_new如何覆盖通用事物中的设置？
2. 使用 **REQUIRES_NEW** 后，方法内发生的异常不会向外抛出？
   * REQUIRES_NEW 内部发生异常后，外部方法不try catch的话 会导致外部方法回滚。
   * REQUIRES_NEW 内部方法提交后，外部方法发生异常，不会导致已提交的内部方法回滚。
3. 
